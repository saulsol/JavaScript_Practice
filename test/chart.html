<!DOCTYPE html>
<html>
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="http://code.jquery.com/jquery-3.4.1.js"></script>

    <script type="text/javascript">


    let jsonData ;
            
    $(document).ready(function(){
        $.ajax({
                url: 'http://localhost:1000/chart',
                method: 'GET',
                dataType: 'text',
                contentType: 'application/json',
                success: function(data){
                        jsonData = JSON.parse(data);
                        google.charts.load('current', {'packages':['corechart']});
                        google.charts.setOnLoadCallback(drawChart);
                }
            })
    })




      function drawChart() {
        console.log(jsonData);
        console.log(jsonData);
        console.log(jsonData);
        

        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Task');
        data.addColumn('number', 'Hours per Day');

        for (var i = 0; i < jsonData.length; i++) {
            data.addRow([jsonData[i].writer, jsonData[i].count]);
        }


        var options = {
          title: 'HTML CSS SCORE',
          is3D: true
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));


        chart.draw(data, options);



      }


    </script>
  </head>
  <body>
    <div id="piechart" style="width: 900px; height: 500px;"></div>
    <div id="piechart1" style="width: 900px; height: 500px;"></div>
    <div id="piechart2" style="width: 900px; height: 500px;"></div>

  </body>
</html>
